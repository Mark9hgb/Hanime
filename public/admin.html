\
<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Admin Upload ‚Äî Anime Streaming</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
:root{--bg1:#02041a;--bg2:#0b1533;--accent:#7c3aed;--glass:rgba(255,255,255,0.04)}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:radial-gradient(ellipse at 20% 10%, rgba(124,58,237,0.10) 0%, transparent 10%), linear-gradient(180deg,var(--bg1),var(--bg2));color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center}
.stars{position:fixed;inset:0;pointer-events:none;background-image:radial-gradient(#ffffff11 1px, transparent 1px);background-size:3px 3px;opacity:0.6;mix-blend-mode:screen;filter:blur(0.6px)}
.container{width:100%;max-width:880px;margin:24px;padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;box-shadow:0 10px 40px rgba(2,6,23,0.7);position:relative;overflow:hidden}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.title{display:flex;gap:12px;align-items:center}
.logo{width:48px;height:48px;border-radius:8px;background:linear-gradient(135deg,#5b21b6,#7c3aed);display:flex;align-items:center;justify-content:center;font-weight:700;color:white;box-shadow:0 6px 18px rgba(124,58,237,0.18)}
h1{margin:0;font-size:1.25rem}
.back{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:#e6eef8;text-decoration:none}
.card{margin-top:12px;padding:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.form-row{display:flex;gap:12px;margin-top:10px}
.input,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:var(--glass);color:inherit}
.input[type="file"]{padding:8px}
.btn{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
.note{font-size:0.9rem;color:#b7c1d9;margin-top:8px}
.status{margin-top:10px;padding:10px;border-radius:8px;background:rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.02)}
.footer{margin-top:12px;font-size:0.85rem;color:#99a6c6;text-align:right}
@media(max-width:600px){.form-row{flex-direction:column} .header{flex-direction:column;align-items:flex-start;gap:8px} .logo{width:40px;height:40px}}
</style>
</head>
<body>
<div class="stars" aria-hidden="true"></div>
<div class="container">
  <div class="header">
    <div class="title"><div class="logo">AS</div><h1>Admin Upload</h1></div>
    <div><a class="back" href="/">üè† Back to Home</a></div>
  </div>

  <div class="card">
    <div style="display:flex;gap:12px;align-items:center;">
      <div style="flex:1">
        <label>Email</label>
        <input id="email" class="input" value="markjavier1648@gmail.com">
      </div>
      <div style="width:180px">
        <label>Password</label>
        <input id="password" class="input" value="password" type="password">
      </div>
      <div style="width:140px;display:flex;align-items:center"><button id="loginBtn" class="btn">Login</button></div>
    </div>

    <div class="note">Only the admin account can upload. Use the Login button to authenticate; token is kept in memory.</div>
    <div id="loginStatus" class="status" style="display:none"></div>

    <hr style="margin-top:14px;border:none;border-top:1px solid rgba(255,255,255,0.03)">

    <div id="uploadArea" style="display:none;margin-top:12px">
      <label>Title</label>
      <input id="title" class="input" placeholder="Video title (optional)">
      <label>Description</label>
      <textarea id="description" class="input" rows="3" placeholder="Short description"></textarea>

      <div class="form-row">
        <input id="file" type="file" class="input" accept="video/*">
        <button id="uploadBtn" class="btn">Upload Video</button>
      </div>

      <div id="uploadStatus" class="status" style="display:none"></div>
    </div>

    <div class="footer">Uploads store videos on Cloudinary and add them to your site. Set Cloudinary env vars in Vercel.</div>
  </div>
</div>

<script>
const API = '/api';
let token = null;

function showLoginStatus(txt, ok){
  const el = document.getElementById('loginStatus');
  el.style.display = 'block';
  el.style.color = ok ? '#b8f5d6' : '#ffb4b4';
  el.textContent = txt;
}

function showUploadStatus(txt, ok){
  const el = document.getElementById('uploadStatus');
  el.style.display = 'block';
  el.style.color = ok ? '#b8f5d6' : '#ffb4b4';
  el.textContent = txt;
}

document.getElementById('loginBtn').addEventListener('click', async ()=>{
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  try{
    const res = await fetch(API + '/auth/login', {
      method:'POST', headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ email, password })
    });
    const j = await res.json();
    if (j.token){
      token = j.token;
      showLoginStatus('‚úÖ Logged in as ' + j.user.email, true);
      document.getElementById('uploadArea').style.display = 'block';
      document.getElementById('loginBtn').textContent = 'Logged';
    } else {
      showLoginStatus('‚ùå Login failed', false);
    }
  }catch(e){
    showLoginStatus('‚ùå Network error', false);
  }
});

document.getElementById('uploadBtn').addEventListener('click', async ()=>{
  const fileEl = document.getElementById('file');
  if (!fileEl.files || fileEl.files.length === 0){ showUploadStatus('Please select a video file', false); return; }
  const file = fileEl.files[0];
  const form = new FormData();
  form.append('file', file);
  form.append('title', document.getElementById('title').value);
  form.append('description', document.getElementById('description').value);
  showUploadStatus('Uploading...', true);
  try{
    const res = await fetch(API + '/videos/upload', { method: 'POST', headers: { Authorization: 'Bearer ' + token }, body: form });
    const j = await res.json();
    if (j.ok){
      showUploadStatus('‚úÖ Uploaded: ' + (j.video.title || j.video.id), true);
    } else {
      showUploadStatus('‚ùå Upload failed: ' + (j.error || 'unknown'), false);
    }
  }catch(e){
    console.error(e);
    showUploadStatus('‚ùå Upload error', false);
  }
});
</script>
</body>
</html>
